
# How it should update:

- Allow specifying a set of repos/branches to track, e.g. branch nixos-20.03 from github.com/NixOS/nixpkgs
- Periodically check (or manually on demand) whether the branch has been updated (fetch existing docker tags to figure this out, no state!)
  - First do a niv update and commit the result if something changed
	- Then do a check for the docker hub tag and build/update/push it if necessary
	- Finally, push the git commit with the update to master


Use niv sources.json to specify all repos that should be tracked -> periodic niv update is all that's needed

How often should the checker run? Every hour is probably good

CI should just run:
- niv update
- nix-build -A update
- result/bin/update
- if <any changes> then git commit and push to master

update should also run the tests


Things considered:
- Integrate directly with niv? Would allow more than just nixpkgs sources, but not as good for purity -> Nope
- Use https://channels.nix.gsc.io/ for getting channel history -> nothing missed. Problem: Doesn't work for other git repos, and reliance on that page staying online -> Nope
